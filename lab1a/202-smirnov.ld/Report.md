# TCP чат

## Описание протокола
### Формат взаимодействия
- Запрос от клиента к серверу на подключение с указанием имени
- Отправка сообщений от клиента серверу и получение сообщений от сервера
- Разрыв соедиения сообщением "quit"
- Менять пункты местами нельзя, второй пункт может отсутствовать

### Формат сообщений
- Клиент → Сервер:
    - Размер сообщения — 4 байта
    - Сообщение — <размер сообщения> - 1 байт
    - Флаг — 1 байт
    - Размер пути к файлу — 4 байта
    - Размер файла — 4 байта
    - Путь к файлу — <размер пути к файлу> байт
    - Файл — <размер файла> байт

- Сервер → Клиент:
    - Размер времени — 4 байта
    - Время — <размер времени> байт
    - Размер имени — 4 байта
    - Размер сообщения — 4 байта
    - Имя — <размер имени> байт
    - Сообщение — <размер сообщения> - 1 байт
    - Флаг наличия вложения — 1 байт
    - Размер пути к файлу — 4 байта
    - Размер файла — 4 байта
    - Путь к файлу — <размер пути к файлу> байт
    - Файл — <размер файла> байт

## Как запустить
- Скачать репозиторий
- Запуск сервера: *python server.py*
- Запуск клиента: *python сlient.py* 
    - После запуска ввести ip адрес и порт сервера, а так же никнейм

## Основные особенности
- Проверка на уникальность никнеймов
- Сервер сам добавляет никнейм отправителя перед рассылкой
- Преобразование времени под часовой пояс получателя
- Обсулуживание нескольких клиентов: под каждого свой поток на сервере
- Получение и отправка сообщений клиентом в разных потоках
- Есть возможность прикрепить к сообщению файл
