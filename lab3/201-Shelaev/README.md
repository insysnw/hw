
# Лабораторная работа № 3. Платёжная система (1.2.14)

Используемая версия Python 3.7

## Сервер
Написан на фреймворке **Flask**. Поддерживает базовые идентификацию и аутентификацию пользователей.
Для примера импользуется IP-адрес **127.0.0.1** и порт **8080**.

Сервер обрабатывает ошибки с кодами **400** (*Bad request*), **401** (*Unauthorized*), **403** (*Forbidden*) и **404** (*Not found*).  
При успешном выполнении запроса возвращаются коды **200** (*OK*) или **201** (*Created*) и JSON с запрашиваемыми данными.   

Обработчик запросов (контроллер) описан в файле `paymentSystem.py`, функции для получения данных в файле `service.py`.

## Клиент
Для запуска клиента в командую строку требуется написать `python paymentClient.py`.

После запуска пользователю требуется правильно ввести IP-адрес и порт сервера в формате `IP:PORT`.

### Команды
Клиент поддерживает следующие команды:
1) `exit` - выход пользователя из платёжной системы (если был выполнен вход) и закрытие клиента
2) `login` - авторизация пользователя в платёжной системе
3) `register` - регистрация нового пользователя в платёжной системе (открывается новый электронный кошелёк со значением *0.0*)
4) `logout` - выход пользователя из платёжной системы (вход уже был выполнен)
5) `wallets` - получение списка всех электронных кошельков пользователя
6) `account` - проверка состояния счёта выбранного кошелька (или всех сразу)
7) `create` - открытие для пользователя нового электронного кошелька со значением *0.0*
8) `transfer` - осуществление перевода с одного электронного кошелька на другой (необязательно кошельки разных пользователей)
9) ...

Команда **1** выполняется всегда (для авторизованных и неавторизованных пользователей).  
Команды **2** и **3** - только для неавторизованных пользователей.  
Команды **4** - **9** - только для авторизованных пользователей.

Стоит отметить, что одно из условий выполнения команды **8** является не превышение суммы перевода значения на электронном кошельке, с которого осуществляется этот перевод.

### Сообщения пользователю
Все команды выше сопровождаются различными сообщениями.  
При успешном запросе пользователю отображается полученная информация, например, состояние его счёта (сообщение: `In the wallet {wallet_num} You have {account}`).  
После корректного выполнения команд `login` или `logout` пользователь увидит сообщение следующего формата: `OK: You have successfully logged in (out)`.

Ошибки с кодами **400** (*Bad request*), **401** (*Unauthorized*), **403** (*Forbidden*) и **404** (*Not found*) 
обрабатываются соответствующим образом в зависимости от введённой команды. Например, при ошибке **404** может появиться сообщение: `ERROR: There is no user with this login, try again`.

Ошибки с остальными кодами не обрабатываются и показываются пользователю без изменений.